!function(a){function t(a){var t,e=a.getAttribute("data-modal-attr"),o=a.getAttribute("data-target"),d=a.getAttribute("data-url")||a.getAttribute("href"),l={"class":"modal fade",tabindex:"-1",role:"dialog",replace:!1};e&&$.extend(!0,l,$.parseJSON(e)),l.replace&&$(".modal").modal("hide"),delete l.replace,t=o?$(o):$("<div>").attr(l),$("body").addClass("loading"),t.load(d,"",function(a,e){$("body").removeClass("loading"),"error"!=e?t.modal():self.flashmsg({type:"danger",html:"could not load modal dialog"})})}ajax_ops.modal_form=function(a,t){var e=$(a),o={target:e.closest(".modal")};return t||(t={}),$.extend(!0,o,t),o.cb=function(a,e){t.with_close&&a.modal("hide"),t.cb&&t.cb(a,e)},ajax_ops.submit_form(a,o)},$(a).on("click",'[data-toggle="ajax-modal"]',function(){t(this)})}(document,window);